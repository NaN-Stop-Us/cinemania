{"version":3,"file":"main-DWBfQIHo.js","sources":["../../src/js/theme.js","../../src/js/fetchApi.js","../../src/js/catalog-hero.js"],"sourcesContent":["window.addEventListener(\"DOMContentLoaded\", () => {\n    const toggle = document.getElementById('theme-toggle');\n    const body = document.body;\n   \n    const savedTheme = localStorage.getItem('theme');\n    if (savedTheme === 'light') {\n      body.classList.add('light-theme');\n    } else {\n      body.classList.remove('light-theme'); \n      localStorage.setItem('theme', 'dark');\n    }\n   \n    toggle.addEventListener('click', () => {\n      body.classList.toggle('light-theme');\n      const isLight = body.classList.contains('light-theme');\n      localStorage.setItem('theme', isLight ? 'light' : 'dark');\n    });\n  });","import axios from 'axios';\n\nconst API_KEY = 'ed2682fe1cd0ecc2efbcdeb7464c5ffd';\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst IMG_BASE_URL = 'https://image.tmdb.org/t/p';\n\nexport { BASE_URL, IMG_BASE_URL };\n\n    \nexport const ENDPOINTS = {\n  POPULAR_MOVIES: '/movie/popular',\n  UPCOMING_MOVIES: '/movie/upcoming',\n  TRENDING_WEEK: '/trending/movie/week',\n  TRENDING_DAY: '/trending/movie/day',\n  SEARCH_MOVIES: '/search/movie',\n  GENRE_LIST: '/genre/movie/list',\n  MOVIE_DETAILS: movieId => `/movie/${movieId}`,\n  MOVIE_VIDEOS: movieId => `/movie/${movieId}/videos`,\n  IMG_ORIGINAL: '/original',\n  IMG_W500: '/w500',\n  IMG_W780: '/w780',\n  IMG_W1280: '/w1280',\n};\n\n\nexport async function fetchMovies(baseUrl, endpoint, params = {}) {\n  try {\n    const response = await axios.get(`${baseUrl}${endpoint}`, {\n      params: {\n        api_key: API_KEY,\n        language: 'en-US',\n        page: 1,\n        ...params,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    throw error;\n  }\n}\n\nexport async function fetchGenres() {\n  try {\n    const response = await axios.get(`${BASE_URL}${ENDPOINTS.GENRE_LIST}`, {\n      params: { api_key: API_KEY, language: 'en-US' },\n    });\n    const map = {};\n    response.data.genres.forEach(g => {\n      map[g.id] = g.name;\n    });\n    return map;\n  } catch (err) {\n    console.error('Error fetching genres:', err);\n    return {};\n  }\n}","import { fetchMovies, BASE_URL, ENDPOINTS, IMG_BASE_URL, fetchGenres } from './fetchApi';\n\nlet genreMap = {};\n(async () => {\n  genreMap = await fetchGenres();\n})();\n\nconst catalogHero = document.querySelector('#catalog-hero');\nconst modal = document.getElementById('trailer-modal');\n// Rastgele popüler film seçimi\nfunction getRandomMovie(movies) {\n  const randomIndex = Math.floor(Math.random() * movies.length);\n  return movies[randomIndex];\n}\n// Trailer verisini çek\nasync function getTrailerUrl(movieId) {\n  try {\n    const data = await fetchMovies(BASE_URL, ENDPOINTS.MOVIE_VIDEOS(movieId));\n    const trailer = data.results.find(\n      v => v.type === 'Trailer' && v.site === 'YouTube'\n    );\n    return trailer ? `https://www.youtube.com/embed/${trailer.key}` : null;\n  } catch (err) {\n    return null;\n  }\n}\n// Trailer gösterme fonksiyonu\nfunction showTrailer(youtubeUrl) {\n  modal.innerHTML = `\n    <div class=\"overlay\"></div>\n    <div class=\"iframe-container\">\n      <button class=\"close-span-btn\" aria-label=\"Close trailer\">\n        <span>&times;</span>\n      </button>\n      <iframe src=\"${youtubeUrl}\" frameborder=\"0\" allowfullscreen></iframe>\n    </div>\n  `;\n  modal.classList.add('active');\n  modal.querySelector('.overlay').addEventListener('click', closeTrailer);\n  modal.querySelector('.close-span-btn').addEventListener('click', closeTrailer);\n}\n// Trailer kapatma fonksiyonu\nfunction closeTrailer() {\n  modal.classList.remove('active');\n  modal.innerHTML = '';\n}\n// Yıldızları hesapla ve SVG'ye dönüştür\nfunction generateStars(vote) {\n  const rating = Math.round(vote) / 2;\n  const fullStars = Math.floor(rating);\n  const hasHalfStar = rating % 1 >= 0.5;\n  const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);\n  let starsHtml = '';\n  for (let i = 0; i < fullStars; i++) {\n    starsHtml += `<img src=\"img/starfull.svg\" alt=\"Full Star\" class=\"star-icon\" />`;\n  }\n  if (hasHalfStar) {\n    starsHtml += `<img src=\"img/starhalf.svg\" alt=\"Half Star\" class=\"star-icon\" />`;\n  }\n  for (let i = 0; i < emptyStars; i++) {\n    starsHtml += `<img src=\"img/starempty.svg\" alt=\"Empty Star\" class=\"star-icon\" />`;\n  }\n  return starsHtml;\n}\n// Katalog herosunu başlat\nasync function initCatalogHero() {\n  try {\n    const data = await fetchMovies(BASE_URL, ENDPOINTS.POPULAR_MOVIES);\n    const movie = getRandomMovie(data.results);\n    const backgroundUrl = `${IMG_BASE_URL}${ENDPOINTS.IMG_W1280}${movie.backdrop_path}`;\n    catalogHero.style.backgroundImage = `url('${backgroundUrl}')`;\n    catalogHero.innerHTML = `\n  <div class=\"catalog-hero-overlay\"></div>\n  <div class=\"catalog-hero-content\">\n    <h1>${movie.title}</h1>\n    <div class=\"stars\">${generateStars(movie.vote_average)}</div>\n    <p>${movie.overview}</p>\n    <div class=\"buttons\">\n      <button class=\"watch-trailer\">Watch Trailer</button>\n      <button class=\"more-details\">More Details</button>\n    </div>\n  </div>\n`;\ncatalogHero.querySelector('.more-details').addEventListener('click', () => {\n  showDetailsPopup(movie);\n});\n\n    catalogHero.querySelector('.watch-trailer').addEventListener('click', async () => {\n      const youtubeUrl = await getTrailerUrl(movie.id);\n      if (youtubeUrl) {\n        showTrailer(youtubeUrl);\n      } else {\n        modal.innerHTML = `\n  <div class=\"overlay\"></div>\n  <div class=\"iframe-container not-found\">\n    <button class=\"close-span-btn\" aria-label=\"Close trailer\">\n      <span>&times;</span>\n    </button>\n    <div class=\"not-found-message\">\n      <div class=\"not-found-text\">\n        <h2>OOPS...</h2>\n        <p>We are very sorry!<br>But we couldn't find the trailer.</p>\n      </div>\n      <div class=\"not-found-img-wrapper\">\n        <img src=\"./img/sorryImg.png\" alt=\"Not Found\" class=\"not-found-img\">\n      </div>\n    </div>\n  </div>\n`;\n        modal.classList.add('active');\n        modal.querySelector('.close-span-btn').addEventListener('click', closeTrailer);\n        modal.querySelector('.overlay').addEventListener('click', closeTrailer);\n      }\n    });\n  } catch (err) {\n    console.error('Catalog hero error:', err);\n  }\n}\ninitCatalogHero();\n\nfunction showDetailsPopup(movie) {\n  const modal = document.getElementById('movie-detail-modal');\n  const poster = `${IMG_BASE_URL}${ENDPOINTS.IMG_W500}${movie.poster_path}`;\n  const genres = movie.genre_ids?.map(id => genreMap?.[id]).join(', ') || 'N/A';\n\n  modal.innerHTML = `\n    <div class=\"detail-overlay\"></div>\n    <div class=\"detail-box\" role=\"dialog\" aria-modal=\"true\">\n      <button class=\"close-span-btn-details\" aria-label=\"Close detail\"><span>&times;</span></button>\n      <div class=\"detail-content\">\n        <img src=\"${poster}\" alt=\"${movie.title}\" class=\"detail-poster\" />\n        <div class=\"detail-info\">\n          <h2>${movie.title}</h2>\n          <p><strong>Vote / Votes:</strong> \n  <span class=\"value-box\">${movie.vote_average.toFixed(1)}</span> / \n  <span class=\"value-box\">${movie.vote_count}</span>\n</p>\n<p><strong>Popularity:</strong> <span>${movie.popularity.toFixed(1)}</span></p>\n<p><strong>Genre:</strong> <span>${genres}</span></p>\n<p><strong>ABOUT</strong></p>\n<div class=\"scrollable-description\">${movie.overview}</div>\n\n          <button class=\"add-library\">Add to My Library</button>\n        </div>\n      </div>\n    </div>\n  `;\n\n  modal.classList.add('active');\n  \n\n  // ESC ile kapatma\n  const escHandler = e => {\n    if (e.key === 'Escape') closeModal();\n  };\n  document.addEventListener('keydown', escHandler);\n\n  function closeModal() {\n    modal.classList.remove('active');\n    modal.innerHTML = '';\n    document.removeEventListener('keydown', escHandler);\n  }\n\n  modal.querySelector('.close-span-btn-details').addEventListener('click', closeModal);\n \n  modal.querySelector('.detail-overlay').addEventListener('click', closeModal);\n}\n\n\n"],"names":["toggle","body","isLight","API_KEY","BASE_URL","IMG_BASE_URL","ENDPOINTS","movieId","fetchMovies","baseUrl","endpoint","params","axios","error","fetchGenres","response","map","g","err","genreMap","catalogHero","modal","getRandomMovie","movies","randomIndex","getTrailerUrl","trailer","v","showTrailer","youtubeUrl","closeTrailer","generateStars","vote","rating","fullStars","hasHalfStar","emptyStars","starsHtml","i","initCatalogHero","data","movie","backgroundUrl","showDetailsPopup","poster","genres","_a","id","escHandler","e","closeModal"],"mappings":"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"}
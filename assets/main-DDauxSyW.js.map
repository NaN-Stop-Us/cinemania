{"version":3,"file":"main-DDauxSyW.js","sources":["../../src/js/home.js","../../src/js/footer.js"],"sourcesContent":["// fetchApi\nimport {\n  BASE_URL,\n  ENDPOINTS,\n  fetchMovies,\n  fetchGenres,\n  IMG_BASE_URL,\n} from './fetchApi.js';\n\n// Catalog import\nimport { showDetailsPopup } from './catalog-hero.js';\n\n//WEEKLY TRENDS//\nconst weeklyListEl = document.querySelector('#weekly-trends-list');\n\nfunction getFirstThree(arr) {\n  return arr.slice(0, 3);\n}\n\nfunction renderWeeklyCards(movies) {\n  const markup = movies.map(movie => {\n    const { id, title, poster_path, release_date, vote_average } = movie;\n    const year = release_date ? release_date.slice(0, 4) : 'N/A';\n    const poster = poster_path\n      ? `${IMG_BASE_URL}/w500${poster_path}`\n      : 'https://via.placeholder.com/395x574?text=No+Image';\n\n    return `\n      <li class=\"weekly-card\" data-id=\"${id}\">\n        <div class=\"weekly-card__image-wrapper\">\n          <img src=\"${poster}\" alt=\"${title}\" class=\"weekly-card__image\" />\n          <div class=\"weekly-card__overlay\"></div>\n        </div>\n        <div class=\"weekly-card__info\">\n          <h3 class=\"weekly-card__title\">${title}</h3>\n          <p class=\"weekly-card__meta\">${year} | ‚≠ê ${vote_average.toFixed(1)}</p>\n        </div>\n      </li>\n    `;\n  }).join('');\n\n  weeklyListEl.innerHTML = markup;\n}\n\nasync function loadWeeklyTrends() {\n  try {\n    const data = await fetchMovies(BASE_URL, ENDPOINTS.TRENDING_WEEK);\n    const topThree = getFirstThree(data.results);\n    renderWeeklyCards(topThree);\n  } catch (err) {\n    weeklyListEl.innerHTML = `<p style=\"color:red;\">Failed to load movies üò¢</p>`;\n    console.error('Fetch error:', err);\n  }\n}\n\n// modal ekran\nweeklyListEl.addEventListener('click', async e => {\n  const card = e.target.closest('.weekly-card');\n  if (!card) return;\n\n  const movieId = Number(card.dataset.id);\n  if (!movieId) return;\n\n  try {\n    const data = await fetchMovies(BASE_URL, ENDPOINTS.TRENDING_WEEK);\n    const movie = data.results.find(film => film.id === movieId);\n    if (movie) {\n      showDetailsPopup(movie);\n    }\n  } catch (error) {\n    console.error('Modal error:', error);\n  }\n});\n\n// UPCOMING THIS MONTH\n\nconst upcomingCard = document.getElementById('upcoming-card');\n\nfunction getCurrentMonthRange() {\n  const now = new Date();\n  const year = now.getFullYear();\n  const month = now.getMonth();\n  const start = new Date(year, month, 1).toISOString().split('T')[0];\n  const end = new Date(year, month + 1, 0).toISOString().split('T')[0];\n  return { start, end };\n}\n\n// localStorage\n\nfunction isInLibrary(id) {\n  const saved = JSON.parse(localStorage.getItem('myLibrary')) || [];\n  return saved.some(film => film.id === id);\n}\n\nfunction toggleLibrary(movie, button) {\n  const libraryKey = 'myLibrary';\n  let library = JSON.parse(localStorage.getItem(libraryKey)) || [];\n  const exists = library.find(item => item.id === movie.id);\n\n  if (exists) {\n    library = library.filter(item => item.id !== movie.id);\n    button.textContent = 'Add to My Library';\n  } else {\n    library.push(movie);\n    button.textContent = 'Remove from My Library';\n  }\n\n  localStorage.setItem(libraryKey, JSON.stringify(library));\n}\n\nfunction checkLibraryState(movieId, button) {\n  const library = JSON.parse(localStorage.getItem('myLibrary')) || [];\n  const exists = library.find(item => item.id === movieId);\n  button.textContent = exists ? 'Remove from My Library' : 'Add to My Library';\n}\n\nasync function loadUpcomingMovie() {\n  try {\n    const { start, end } = getCurrentMonthRange();\n    const data = await fetchMovies(BASE_URL, ENDPOINTS.UPCOMING_MOVIES);\n    const genresMap = await fetchGenres();\n\n    const filtered = data.results.filter(movie =>\n      movie.release_date >= start && movie.release_date <= end\n    );\n\n    if (!filtered.length) {\n      upcomingCard.innerHTML = `<p class=\"upcoming__info\">No upcoming movies found this month.</p>`;\n      return;\n    }\n\n    const movie = filtered[Math.floor(Math.random() * filtered.length)];\n\n    const image = movie.backdrop_path\n      ? `${IMG_BASE_URL}/original${movie.backdrop_path}`\n      : 'https://via.placeholder.com/800x450';\n\n    const genreNames = movie.genre_ids.map(id => genresMap[id] || 'Unknown').join(', ');\n    const isSaved = isInLibrary(movie.id);\n\n    upcomingCard.innerHTML = `\n      <img class=\"upcoming__img\" src=\"${image}\" alt=\"${movie.title}\" />\n      <div class=\"upcoming__info\">\n        <h3>${movie.title}</h3>\n        <p><strong>Release date:</strong> <span>${movie.release_date}</span></p>\n        <p><strong>Vote / Votes:</strong> <span>${movie.vote_average.toFixed(1)}</span> / <span>${movie.vote_count}</span></p>\n        <p><strong>Popularity:</strong> ${movie.popularity.toFixed(1)}</p>\n        <p><strong>Genre:</strong> ${genreNames}</p>\n        <p><strong>ABOUT</strong></p>\n        <p>${movie.overview}</p>\n        <button class=\"upcoming__btn\">${isSaved ? 'Remove from My Library' : 'Add to My Library'}</button>\n      </div>\n    `;\n\n    const btn = upcomingCard.querySelector('.upcoming__btn');\n    btn.addEventListener('click', () => toggleLibrary(movie, btn));\n    checkLibraryState(movie.id, btn);\n\n  } catch (err) {\n    upcomingCard.innerHTML = `<p class=\"upcoming__info\">Oops! Something went wrong while loading the movie.</p>`;\n    console.error(err);\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  loadWeeklyTrends();\n  loadUpcomingMovie();\n});\n\n// weekly trends remove buton\n// WEEKLY TRENDS i√ßinde modal butonu toggle eden fonksiyon\ndocument.addEventListener('click', e => {\n  const btn = e.target.closest('.add-library');\n  if (!btn) return;\n\n  const modal = document.getElementById('movie-detail-modal');\n  const movieTitle = modal.querySelector('h2')?.textContent?.trim();\n  if (!movieTitle) return;\n\n  // Weekly trends'teki modal i√ßin film ID'yi tahmin etmek zor ama title √ºzerinden basit kontrol yapƒ±yoruz\n  const stored = JSON.parse(localStorage.getItem('myLibrary')) || [];\n  const exists = stored.find(f => f.title === movieTitle);\n\n  if (exists) {\n    const updated = stored.filter(f => f.title !== movieTitle);\n    localStorage.setItem('myLibrary', JSON.stringify(updated));\n    btn.textContent = 'Add to My Library';\n  } else {\n    const newMovie = {\n      title: movieTitle,\n      // daha geli≈ümi≈ü kullanƒ±m i√ßin ID, poster, vs. de eklenebilir\n    };\n    stored.push(newMovie);\n    localStorage.setItem('myLibrary', JSON.stringify(stored));\n    btn.textContent = 'Remove from My Library';\n  }\n});\n","(() => {\n  const openModalBtn=document.querySelector('[data-modal-open]');\n  const closeModalBtn=document.querySelector('[data-modal-close]');\n  const modal= document.querySelector('[data-modal]');\n\n\n  openModalBtn.addEventListener('click', toggleModal);\n  closeModalBtn.addEventListener('click', toggleModal);\n\n// Modal dƒ±≈üƒ±na tƒ±klanƒ±ldƒ±ƒüƒ±nda modalƒ± kapat\n  modal.addEventListener('click', (e) => {\n    if (e.target ===modal) {\n      toggleModal();\n    }\n  });\n// Escape tu≈üuna basƒ±ldƒ±ƒüƒ±nda modalƒ± kapat\n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape' && !modal.classList.contains('is-hidden')) {\n      toggleModal();\n    }\n  });\n\n  function toggleModal() {\n    modal.classList.toggle('is-hidden');\n  }\n})();"],"names":["weeklyListEl","getFirstThree","arr","renderWeeklyCards","movies","markup","movie","id","title","poster_path","release_date","vote_average","year","poster","IMG_BASE_URL","loadWeeklyTrends","data","fetchMovies","BASE_URL","ENDPOINTS","topThree","err","card","movieId","film","showDetailsPopup","error","upcomingCard","getCurrentMonthRange","now","month","start","end","isInLibrary","toggleLibrary","button","libraryKey","library","item","checkLibraryState","exists","loadUpcomingMovie","genresMap","fetchGenres","filtered","image","genreNames","isSaved","btn","movieTitle","_b","_a","stored","f","updated","newMovie","openModalBtn","closeModalBtn","modal","toggleModal","e"],"mappings":"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"}
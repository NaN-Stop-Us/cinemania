{"version":3,"file":"main-DzPRhJJE.js","sources":["../../src/js/theme.js","../../src/js/fetchApi.js","../../src/js/catalog-hero.js"],"sourcesContent":["window.addEventListener(\"DOMContentLoaded\", () => {\n    const toggle = document.getElementById('theme-toggle');\n    const body = document.body;\n   \n    const savedTheme = localStorage.getItem('theme');\n    if (savedTheme === 'light') {\n      body.classList.add('light-theme');\n    } else {\n      body.classList.remove('light-theme'); \n      localStorage.setItem('theme', 'dark');\n    }\n   \n    toggle.addEventListener('click', () => {\n      body.classList.toggle('light-theme');\n      const isLight = body.classList.contains('light-theme');\n      localStorage.setItem('theme', isLight ? 'light' : 'dark');\n    });\n  });","import axios from 'axios';\n\nconst API_KEY = 'ed2682fe1cd0ecc2efbcdeb7464c5ffd';\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst IMG_BASE_URL = 'https://image.tmdb.org/t/p';\n\nexport { BASE_URL, IMG_BASE_URL };\n\n    \nexport const ENDPOINTS = {\n  POPULAR_MOVIES: '/movie/popular',\n  UPCOMING_MOVIES: '/movie/upcoming',\n  TRENDING_WEEK: '/trending/movie/week',\n  TRENDING_DAY: '/trending/movie/day',\n  SEARCH_MOVIES: '/search/movie',\n  GENRE_LIST: '/genre/movie/list',\n  MOVIE_DETAILS: movieId => `/movie/${movieId}`,\n  MOVIE_VIDEOS: movieId => `/movie/${movieId}/videos`,\n  IMG_ORIGINAL: '/original',\n  IMG_W500: '/w500',\n  IMG_W780: '/w780',\n  IMG_W1280: '/w1280',\n};\n\n\nexport async function fetchMovies(baseUrl, endpoint, params = {}) {\n  try {\n    const response = await axios.get(`${baseUrl}${endpoint}`, {\n      params: {\n        api_key: API_KEY,\n        language: 'en-US',\n        page: 1,\n        ...params,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    throw error;\n  }\n}\n\nexport async function fetchGenres() {\n  try {\n    const response = await axios.get(`${BASE_URL}${ENDPOINTS.GENRE_LIST}`, {\n      params: { api_key: API_KEY, language: 'en-US' },\n    });\n    const map = {};\n    response.data.genres.forEach(g => {\n      map[g.id] = g.name;\n    });\n    return map;\n  } catch (err) {\n    console.error('Error fetching genres:', err);\n    return {};\n  }\n}","// fetchApi importu\nimport { fetchMovies, BASE_URL, ENDPOINTS, IMG_BASE_URL, fetchGenres } from './fetchApi';\n\nlet genreMap = {};\n(async () => {\n  genreMap = await fetchGenres();\n})();\n\nconst catalogHero = document.querySelector('#catalog-hero');\nconst modal = document.getElementById('trailer-modal');\n\nfunction getRandomMovie(movies) {\n  const randomIndex = Math.floor(Math.random() * movies.length);\n  return movies[randomIndex];\n}\n\nasync function getTrailerUrl(movieId) {\n  try {\n    const data = await fetchMovies(BASE_URL, ENDPOINTS.MOVIE_VIDEOS(movieId));\n    const trailer = data.results.find(v => v.type === 'Trailer' && v.site === 'YouTube');\n    return trailer ? `https://www.youtube.com/embed/${trailer.key}` : null;\n  } catch (err) {\n    return null;\n  }\n}\n\nfunction showTrailer(youtubeUrl) {\n  modal.innerHTML = `\n    <div class=\"overlay\"></div>\n    <div class=\"iframe-container\">\n      <button class=\"close-span-btn\" aria-label=\"Close trailer\">\n        <span>&times;</span>\n      </button>\n      <iframe src=\"${youtubeUrl}\" frameborder=\"0\" allowfullscreen></iframe>\n    </div>\n  `;\n  modal.classList.add('active');\n  modal.querySelector('.overlay').addEventListener('click', closeTrailer);\n  modal.querySelector('.close-span-btn').addEventListener('click', closeTrailer);\n}\n\nfunction closeTrailer() {\n  modal.classList.remove('active');\n  modal.innerHTML = '';\n}\n\nfunction renderStarRating(rating, containerElement) {\n  if (typeof rating !== 'number' || rating < 0 || rating > 10) {\n    console.error('Rating must be a number between 0 and 10');\n    return;\n  }\n  const fullStarSVG = `\n    <svg class=\"star-icon\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"#F87719\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87L18.18 22 12 18.27 5.82 22 7 14.14l-5-4.87 6.91-1.01z\"/>\n    </svg>`;\n  const halfStarSVG = `\n    <svg class=\"star-icon\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M16.875 7.3125H10.8281L9 1.6875L7.1719 7.3125H1.125L6.0469 10.6875L4.1484 16.3125L9 12.7969L13.8516 16.3125L11.9531 10.6875L16.875 7.3125Z\" stroke=\"url(#half-star-stroke)\" stroke-linejoin=\"round\"/>\n  <path d=\"M9 1.6875V12.7969L4.1484 16.3125L6.0469 10.6875L1.125 7.3125H7.1719L9 1.6875Z\" fill=\"url(#half-star-fill)\"/>\n  <defs>\n    <linearGradient id=\"half-star-stroke\" x1=\"3.0488\" y1=\"2.7325\" x2=\"13.478\" y2=\"16.7124\" gradientUnits=\"userSpaceOnUse\">\n      <stop stop-color=\"#F84119\"/>\n      <stop offset=\"1\" stop-color=\"#F89F19\" stop-opacity=\"0.68\"/>\n    </linearGradient>\n    <linearGradient id=\"half-star-fill\" x1=\"2.0869\" y1=\"2.7325\" x2=\"12.1506\" y2=\"9.4775\" gradientUnits=\"userSpaceOnUse\">\n      <stop stop-color=\"#F84119\"/>\n      <stop offset=\"1\" stop-color=\"#F89F19\" stop-opacity=\"0.68\"/>\n    </linearGradient>\n  </defs>\n</svg>\n`;\n  const emptyStarSVG = `\n    <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M16.875 7.3125H10.8281L9 1.6875L7.17188 7.3125H1.125L6.04688 10.6875L4.14844 16.3125L9 12.7969L13.8516 16.3125L11.9531 10.6875L16.875 7.3125Z\" stroke=\"url(#paint0_linear_148_6994)\" stroke-linejoin=\"round\"/>\n<defs>\n<linearGradient id=\"paint0_linear_148_6994\" x1=\"3.04877\" y1=\"2.73251\" x2=\"13.478\" y2=\"16.7124\" gradientUnits=\"userSpaceOnUse\">\n<stop stop-color=\"#F84119\"/>\n<stop offset=\"1\" stop-color=\"#F89F19\" stop-opacity=\"0.68\"/>\n</linearGradient>\n</defs>\n</svg>`;\n\n  const mappedRating = rating / 2;\n  const fullStars = Math.floor(mappedRating);\n  const hasHalfStar = mappedRating % 1 >= 0.5 ? 1 : 0;\n  const emptyStars = 5 - fullStars - hasHalfStar;\n\n  containerElement.innerHTML = '';\n  const appendSVG = (svgString) => {\n    const temp = document.createElement('div');\n    temp.innerHTML = svgString.trim();\n    const svgElement = temp.firstElementChild;\n    containerElement.appendChild(svgElement);\n  };\n  for (let i = 0; i < fullStars; i++) appendSVG(fullStarSVG);\n  if (hasHalfStar) appendSVG(halfStarSVG);\n  for (let i = 0; i < emptyStars; i++) appendSVG(emptyStarSVG);\n}\n\nasync function initCatalogHero() {\n  try {\n    const data = await fetchMovies(BASE_URL, ENDPOINTS.POPULAR_MOVIES);\n    const movie = getRandomMovie(data.results);\n    const backgroundUrl = `${IMG_BASE_URL}${ENDPOINTS.IMG_W1280}${movie.backdrop_path}`;\n    catalogHero.style.backgroundImage = `url('${backgroundUrl}')`;\n\n    catalogHero.innerHTML = `\n      <div class=\"catalog-hero-overlay\"></div>\n      <div class=\"catalog-hero-content\">\n        <h1>${movie.title}</h1>\n        <div class=\"stars\"></div>\n        <p>${movie.overview}</p>\n        <div class=\"buttons\">\n          <button class=\"watch-trailer\">Watch Trailer</button>\n          <button class=\"more-details\">More Details</button>\n        </div>\n      </div>\n    `;\n\n    const starsContainer = catalogHero.querySelector('.stars');\n    renderStarRating(movie.vote_average, starsContainer);\n\n    catalogHero.querySelector('.more-details').addEventListener('click', () => {\n      showDetailsPopup(movie);\n    });\n\n    catalogHero.querySelector('.watch-trailer').addEventListener('click', async () => {\n      const youtubeUrl = await getTrailerUrl(movie.id);\n      if (youtubeUrl) {\n        showTrailer(youtubeUrl);\n      } else {\n        modal.innerHTML = `\n          <div class=\"overlay\"></div>\n          <div class=\"iframe-container not-found\">\n            <button class=\"close-span-btn\" aria-label=\"Close trailer\">\n              <span>&times;</span>\n            </button>\n            <div class=\"not-found-message\">\n              <div class=\"not-found-text\">\n                <h2>OOPS...</h2>\n                <p>We are very sorry!<br>But we couldn't find the trailer.</p>\n              </div>\n              <div class=\"not-found-img-wrapper\">\n                <img src=\"./img/sorryImg.png\" alt=\"Not Found\" class=\"not-found-img\">\n              </div>\n            </div>\n          </div>\n        `;\n        modal.classList.add('active');\n        modal.querySelector('.close-span-btn').addEventListener('click', closeTrailer);\n        modal.querySelector('.overlay').addEventListener('click', closeTrailer);\n      }\n    });\n  } catch (err) {\n    console.error('Catalog hero error:', err);\n  }\n}\n\ninitCatalogHero();\n\nfunction showDetailsPopup(movie) {\n  const modal = document.getElementById('movie-detail-modal');\n  const poster = `${IMG_BASE_URL}${ENDPOINTS.IMG_W500}${movie.poster_path}`;\n  const genres = movie.genre_ids?.map(id => genreMap?.[id]).join(', ') || 'N/A';\n\n  modal.innerHTML = `\n    <div class=\"detail-overlay\"></div>\n    <div class=\"detail-box\" role=\"dialog\" aria-modal=\"true\">\n      <button class=\"close-span-btn-details\" aria-label=\"Close detail\"><span>&times;</span></button>\n      <div class=\"detail-content\">\n        <img src=\"${poster}\" alt=\"${movie.title}\" class=\"detail-poster\" />\n        <div class=\"detail-info\">\n          <h2>${movie.title}</h2>\n          <p><strong>Vote / Votes:</strong>\n            <span class=\"value-box\">${movie.vote_average.toFixed(1)}</span> /\n            <span class=\"value-box\">${movie.vote_count}</span>\n          </p>\n          <p><strong>Popularity:</strong> <span>${movie.popularity.toFixed(1)}</span></p>\n          <p><strong>Genre:</strong> <span>${genres}</span></p>\n          <p><strong>ABOUT</strong></p>\n          <div class=\"scrollable-description\">${movie.overview}</div>\n          <button class=\"add-library\">Add to My Library</button>\n        </div>\n      </div>\n    </div>\n  `;\n\n  modal.classList.add('active');\n\n  const escHandler = e => {\n    if (e.key === 'Escape') closeModal();\n  };\n  document.addEventListener('keydown', escHandler);\n\n  function closeModal() {\n    modal.classList.remove('active');\n    modal.innerHTML = '';\n    document.removeEventListener('keydown', escHandler);\n  }\n\n  modal.querySelector('.close-span-btn-details').addEventListener('click', closeModal);\n  modal.querySelector('.detail-overlay').addEventListener('click', closeModal);\n}\n"],"names":["toggle","body","isLight","API_KEY","BASE_URL","IMG_BASE_URL","ENDPOINTS","movieId","fetchMovies","baseUrl","endpoint","params","axios","error","fetchGenres","response","map","g","err","genreMap","catalogHero","modal","getRandomMovie","movies","randomIndex","getTrailerUrl","trailer","v","showTrailer","youtubeUrl","closeTrailer","renderStarRating","rating","containerElement","fullStarSVG","halfStarSVG","emptyStarSVG","mappedRating","fullStars","hasHalfStar","emptyStars","appendSVG","svgString","temp","svgElement","i","initCatalogHero","data","movie","backgroundUrl","starsContainer","showDetailsPopup","poster","genres","_a","id","escHandler","e","closeModal"],"mappings":"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"}
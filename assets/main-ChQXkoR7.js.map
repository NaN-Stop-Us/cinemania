{"version":3,"file":"main-ChQXkoR7.js","sources":["../../src/js/home.js","../../src/js/footer.js"],"sourcesContent":["// fetchApi\nimport {\n  BASE_URL,\n  ENDPOINTS,\n  fetchMovies,\n  fetchGenres,\n  IMG_BASE_URL,\n} from './fetchApi.js';\n\n// Catalog import\nimport { showDetailsPopup, renderStarRating } from './catalog-hero.js';\n\nconst weeklyListEl = document.querySelector('#weekly-trends-list');\nconst upcomingCard = document.getElementById('upcoming-card');\nlet genreMap = {};\n\n// TÃ¼r verisini al\n(async () => {\n  genreMap = await fetchGenres();\n})();\n\nfunction getFirstThree(arr) {\n  return arr.slice(0, 3);\n}\n\nfunction renderWeeklyCards(movies) {\n  const markup = movies.map(movie => {\n    const { id, title, poster_path, release_date, vote_average, genre_ids } = movie;\n    const year = release_date ? release_date.slice(0, 4) : 'N/A';\n    const poster = poster_path\n      ? `${IMG_BASE_URL}/w500${poster_path}`\n      : 'https://via.placeholder.com/395x574?text=No+Image';\n    const genres = genre_ids?.map(id => genreMap[id]).join(', ') || '';\n\n    return `\n      <li class=\"weekly-card\" data-id=\"${id}\" data-rating=\"${vote_average}\">\n        <div class=\"weekly-card__image-wrapper\">\n          <img src=\"${poster}\" alt=\"${title}\" class=\"weekly-card__image\" />\n          <div class=\"weekly-card__overlay\"></div>\n        </div>\n        <div class=\"weekly-card__info\">\n          <h3 class=\"weekly-card__title\">${title}</h3>\n          <div class=\"weekly-card__meta-row\">\n            <p class=\"weekly-card__meta\">${genres} | ${year}</p>\n            <div class=\"weekly-card__rating\"></div>\n          </div>\n        </div>\n      </li>\n    `;\n  }).join('');\n\n  weeklyListEl.innerHTML = markup;\n\n  document.querySelectorAll('.weekly-card').forEach(card => {\n    const rating = parseFloat(card.dataset.rating);\n    const ratingContainer = card.querySelector('.weekly-card__rating');\n    renderStarRating(rating, ratingContainer);\n  });\n}\n\nasync function loadWeeklyTrends() {\n  try {\n    const data = await fetchMovies(BASE_URL, ENDPOINTS.TRENDING_WEEK);\n    const topThree = getFirstThree(data.results);\n    renderWeeklyCards(topThree);\n  } catch (err) {\n    weeklyListEl.innerHTML = `<p style=\"color:red;\">Failed to load movies ðŸ˜¢</p>`;\n    console.error('Fetch error:', err);\n  }\n}\n\nfunction getCurrentMonthRange() {\n  const now = new Date();\n  const year = now.getFullYear();\n  const month = now.getMonth();\n  const start = new Date(year, month, 1).toISOString().split('T')[0];\n  const end = new Date(year, month + 1, 0).toISOString().split('T')[0];\n  return { start, end };\n}\n\nasync function loadUpcomingMovie() {\n  try {\n    const { start, end } = getCurrentMonthRange();\n    const data = await fetchMovies(BASE_URL, ENDPOINTS.UPCOMING_MOVIES);\n    const filtered = data.results.filter(movie =>\n      movie.release_date >= start && movie.release_date <= end\n    );\n\n    if (!filtered.length) {\n      upcomingCard.innerHTML = `<p class=\"upcoming__info\">No upcoming movies found this month.</p>`;\n      return;\n    }\n\n    const movie = filtered[Math.floor(Math.random() * filtered.length)];\n\n    const image = movie.backdrop_path\n      ? `${IMG_BASE_URL}/original${movie.backdrop_path}`\n      : 'https://via.placeholder.com/800x450';\n\n    const genreNames = movie.genre_ids.map(id => genreMap[id] || 'Unknown').join(', ');\n\n    upcomingCard.innerHTML = `\n      <img class=\"upcoming__img\" src=\"${image}\" alt=\"${movie.title}\" />\n      <div class=\"upcoming__info\">\n        <h3>${movie.title}</h3>\n        <p><strong>Release date:</strong> <span>${movie.release_date}</span></p>\n        <p><strong>Vote / Votes:</strong> <span>${movie.vote_average.toFixed(1)}</span> / <span>${movie.vote_count}</span></p>\n        <p><strong>Popularity:</strong> ${movie.popularity.toFixed(1)}</p>\n        <p><strong>Genre:</strong> ${genreNames}</p>\n        <p><strong>ABOUT</strong></p>\n        <p>${movie.overview}</p>\n        <button class=\"add-library\">Add to My Library</button>\n      </div>\n    `;\n\n    const btn = upcomingCard.querySelector('.add-library');\n    btn.addEventListener('click', () => showDetailsPopup(movie));//gerekli fonksiyon \n\n  } catch (err) {\n    upcomingCard.innerHTML = `<p class=\"upcoming__info\">Oops! Something went wrong while loading the movie.</p>`;\n    console.error(err);\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  loadWeeklyTrends();\n  loadUpcomingMovie();\n});\n\nweeklyListEl.addEventListener('click', async e => {\n  const card = e.target.closest('.weekly-card');\n  if (!card) return;\n\n  const movieId = Number(card.dataset.id);\n  if (!movieId) return;\n\n  try {\n    const data = await fetchMovies(BASE_URL, ENDPOINTS.TRENDING_WEEK);\n    const movie = data.results.find(film => film.id === movieId);\n    if (movie) showDetailsPopup(movie);\n  } catch (error) {\n    console.error('Modal error:', error);\n  }\n});\n","(() => {\n  const openModalBtn = document.querySelector('[data-modal-open=\"footer\"]');\n  const closeModalBtn = document.querySelector('[data-modal-close=\"footer\"]');\n  const footerModal = document.querySelector('[data-modal=\"footer\"]');\n\n  openModalBtn.addEventListener('click', toggleModal);\n  closeModalBtn.addEventListener('click', toggleModal);\n\n// Modal dÄ±ÅŸÄ±na tÄ±klanÄ±ldÄ±ÄŸÄ±nda modalÄ± kapat\n  footerModal.addEventListener('click', (e) => {\n    if (e.target === footerModal) {\n      toggleModal();\n    }\n  });\n// Escape tuÅŸuna basÄ±ldÄ±ÄŸÄ±nda modalÄ± kapat\n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape' && !footerModal.classList.contains('is-hidden')) {\n      toggleModal();\n    }\n  });\n\n  function toggleModal() {\n    footerModal.classList.toggle('is-hidden');\n  }\n})();"],"names":["weeklyListEl","upcomingCard","genreMap","fetchGenres","getFirstThree","arr","renderWeeklyCards","movies","markup","movie","id","title","poster_path","release_date","vote_average","genre_ids","year","poster","IMG_BASE_URL","genres","card","rating","ratingContainer","renderStarRating","loadWeeklyTrends","data","fetchMovies","BASE_URL","ENDPOINTS","topThree","err","getCurrentMonthRange","now","month","start","end","loadUpcomingMovie","filtered","image","genreNames","showDetailsPopup","e","movieId","film","error","openModalBtn","closeModalBtn","footerModal","toggleModal"],"mappings":"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"}